# SnapPaste

> 手机拍照，电脑粘贴。快、干净、心流不断。

## JTBD (Jobs To Be Done)

> **当我**集中刷数学题、需要让 AI 帮我解题时，
> **我想要**手机拍完题目，电脑立刻能粘贴，
> **这样我就能**保持心流不断、过程快且干净（无垃圾文件）。

## 核心需求

| 需求 | 描述 | 优先级 |
|------|------|--------|
| 快 | 局域网直传，亚秒级延迟 | P0 |
| 干净 | 图片不落盘，直接进剪贴板，无中间垃圾 | P0 |
| 低启动成本 | 扫码即连接，无需 USB 调试、无需装驱动 | P0 |
| 心流不断 | 拍完即传，电脑端无需点击"下载" | P0 |

## 技术方案

### 架构概览

```
┌─────────────┐         局域网 HTTP POST         ┌─────────────────┐
│   手机端    │  ─────────────────────────────▶  │     电脑端      │
│  (PWA 网页) │        图片 Base64/Blob          │  (本地服务脚本) │
└─────────────┘                                   └────────┬────────┘
       ▲                                                   │
       │ 扫码获取电脑 IP + 端口                             ▼
       └──────────────────────────────────────    ┌─────────────────┐
                                                  │  系统剪贴板     │
                                                  │  (Ctrl+V 可用)  │
                                                  └─────────────────┘
```

### 模块分工

| 模块 | 职责 | 技术选型 |
|------|------|----------|
| 电脑端服务 | 启动 HTTP Server、生成二维码、接收图片、写入剪贴板 | Python (Flask/FastAPI) 或 Node.js |
| 手机端网页 | 扫码连接、调用摄像头、拍照、POST 发送 | PWA (纯前端 HTML/JS) |
| 连接机制 | 电脑显示二维码（含 `http://<局域网IP>:<端口>`），手机扫码直接打开网页 | QRCode 库 |

### 技术细节

**电脑端**：
- 启动时自动检测本机局域网 IP
- 生成二维码显示在终端或弹窗
- 接收 POST 请求中的图片数据
- 调用系统 API 写入剪贴板（Windows: `win32clipboard` 或 PowerShell）

**手机端**：
- 纯静态 HTML + JS，由电脑端 HTTP Server 直接 serve
- 使用 `navigator.mediaDevices.getUserMedia()` 调用后置摄像头
- 拍照后通过 `fetch()` POST 到电脑端
- 可"添加到主屏幕"作为 PWA 使用

## MVP 功能清单

### Must Have (v0.1)

- [ ] 电脑端：启动脚本，显示二维码
- [ ] 电脑端：接收图片，写入 Windows 剪贴板
- [ ] 手机端：扫码打开网页
- [ ] 手机端：点击按钮拍照
- [ ] 手机端：拍完自动发送（无需二次确认）

### Nice to Have (Later)

- [ ] 电脑端：系统托盘常驻，开机自启
- [ ] 手机端：PWA 支持（添加到主屏幕）
- [ ] 历史记录：保留最近 N 张的缩略图（可选落盘）
- [ ] 多设备：支持多台手机同时连接
- [ ] 跨平台：支持 macOS / Linux

## 开发计划

**目标**：半小时 ~ 一小时 vibe coding 完成 MVP

| 阶段 | 任务 | 预估时间 |
|------|------|----------|
| 1 | 电脑端 HTTP Server + 剪贴板写入 | 20 min |
| 2 | 二维码生成与显示 | 5 min |
| 3 | 手机端拍照网页 | 20 min |
| 4 | 联调测试 | 15 min |

## 💡 The Journey (思维演变复盘)

### 关键转折点 (Key Pivots)

1. **从"投屏"到"直传剪贴板"**
   - 最初想法：手机投屏到电脑，电脑截图
   - 转折：意识到最终目的是"粘贴给 AI"，投屏多了一步截图操作
   - 结论：直接拍照→剪贴板，路径更短

2. **从"虚拟摄像头"到"简单 HTTP"**
   - 最初想法：把手机注册成 Windows 虚拟摄像头设备
   - 转折：虚拟摄像头需要内核驱动，开发复杂度远超半小时 MVP
   - 结论：用最简单的 HTTP POST，够用就行

3. **从"复用 OBS"到"自研轻量方案"**
   - 最初想法：OBS 有虚拟摄像头功能，能复用吗？
   - 转折：OBS 太重了（200MB+），而且还是给你视频流，不是图片
   - 结论：杀鸡不用牛刀，几十行代码解决问题

### 放弃的路径 (Not-to-do)

- ❌ scrcpy 投屏：启动成本高（USB 调试），不适合"无感启动"场景
- ❌ 微信传图：会留聊天记录垃圾，占用空间
- ❌ OBS 方案：太重，且产出是视频流而非图片
- ❌ 虚拟摄像头驱动：开发复杂度超出预期

### 核心洞察

> 你要的不是"手机摄像头共享给电脑"，而是"拍完立刻能粘贴"。
> 问题的本质是**剪贴板同步**，不是**视频流传输**。
